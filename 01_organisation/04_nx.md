# Nx und Monorepo

## Was ist NX?

Nx ist eine Erweiterung und Aufsatz auf das Angular Command Line Interface (Angular CLI).
Es stellt einen Workspace bereit und bietet Werkzeuge um zum Beispiel Code zu generieren,
das Build-System zu bedienen, oder aber auch Tests zu starten.

Zusätzlich bietet Nx Werkzeuge, um Abhängigkeiten innerhalb des Projekts zu steuern
und eine Möglichkeit die Verwendungen von Code mittels Constraints einzuschränken.

## Was ist ein Monorepo?

Anstatt jedes Projekt in ein eigenes Repository zu legen, werden mehrere Teilprojekte in
demselben Repository abgelegt.

### Vorteile:

- Einfachere Wiederverwendung von Quellcode, da keine Versionen als Artefakt veröffentlicht werden müssen.
- Bessere Verwaltung von Abhängigkeiten auf Fremd-Bibliotheken da diese für alle Teilprojekte gleich sind
- Atomare Commits, bei denen Änderungen über alle Teilprojekte hinweg durchgeführt werden
- Teamübergreifende Zusammenarbeit über Projektgrenzen hinweg

### Nachteile:

- Sichtbarkeit kann nicht pro Teilprojekt gesteuert werden. Zugriff aufs Repository bedeutet Lese- bzw. Schreibrechte 
  auf dem gesamten Quellcode.
- Nicht alle Build-Systeme unterstützen Monorepos und werden langsamer als separat gebaute Projekte.

## Monorepo mit NX

Es werden Angular Anwendungen und Bibliotheken in einem Repository abgelegt. Da es nur eine *package.json* für das
gesamte Projekt gibt, erzwingen wir die Verwendung einer einheitlichen Version unserer Abhängigkeiten.

Geeignet sind NX Workspaces um Teilprojekte zusammenzufassen oder Projekte mit einer ähnlichen Domäne.

### Umgebung mit NX einrichten

```bash
npx create-nx-workspace@latest
```

Im interaktiven Teil des CLI vergeben wir den Namen des Workspace mit `rail` und wählen das Preset `Angular` aus.
Der Name des Projekts wird mit `prototype` angegeben. Anschließend ist im neu erzeugten Ordner *rail* unser 
NX-Monorepo zu finden.

